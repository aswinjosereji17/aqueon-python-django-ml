<form id="signup-form" method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
    {% csrf_token %}
    <input type="text" id="name" placeholder="Username" name="name" required>
    <span id="nameError" class="error"></span>

    <input type="email" id="email" placeholder="Email" name="email" required>
    <span id="emailError" class="error"></span>

    <input type="text" id="company_name" placeholder="Company name" name="company" required>
    <span id="companyError" class="error"></span>

    <input type="text" id="gstin" placeholder="GSTIN" name="gstin" required>
    <span id="gstinError" class="error"></span>

    <label style="margin-left:27px; font-size:15px">Upload Document</label>
    <input style="margin-left:25px;" type="file" id="document" placeholder="Document" name="document" required
        pattern=".*\S+.*" title="Please select a file">
    <span id="documentError" class="error"></span>

    <input type="password" id="password" placeholder="Password" name="password" required>
    <span id="passwordError" class="error"></span>

    <input type="password" id="confirmPassword" placeholder="Confirm Password" name="confirmPassword" required>
    <span id="confirmPasswordError" class="error"></span>

    <button class="submitbtn" type="submit" id="submitButton">Sign Up</button>
    <p class="or"> OR</p>
</form>

<script>
    function validateForm() {
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var company = document.getElementById("company_name").value;
        var gstin = document.getElementById("gstin").value;
        var document = document.getElementById("document").value;
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirmPassword").value;

        var emailRegex = /\S+@\S+\.\S+/;
        var passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9!@#$%^&*()_+,.?]{8,}$/;

        // Reset error messages
        document.getElementById("nameError").textContent = "";
        document.getElementById("emailError").textContent = "";
        document.getElementById("companyError").textContent = "";
        document.getElementById("gstinError").textContent = "";
        document.getElementById("documentError").textContent = "";
        document.getElementById("passwordError").textContent = "";
        document.getElementById("confirmPasswordError").textContent = "";

        // Validate username
        if (!/^[A-Za-z][A-Za-z0-9]*$/.test(name)) {
            document.getElementById("nameError").textContent = "Username must start with alphabets and contain only alphanumeric characters.";
            return false;
        }

        // Validate email
        if (!emailRegex.test(email)) {
            document.getElementById("emailError").textContent = "Invalid email address.";
            return false;
        }

        // Validate company name
        if (company.trim() === "") {
            document.getElementById("companyError").textContent = "Company name cannot be empty.";
            return false;
        }

        // Validate GSTIN
        if (!/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1}$/.test(gstin)) {
            document.getElementById("gstinError").textContent = "Invalid GSTIN.";
            return false;
        }

        // Validate document
        if (document.trim() === "") {
            document.getElementById("documentError").textContent = "Please select a document.";
            return false;
        }

        // Validate password
        if (!passwordRegex.test(password)) {
            document.getElementById("passwordError").textContent = "Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, and one digit.";
            return false;
        }

        // Validate password confirmation
        if (password !== confirmPassword) {
            document.getElementById("confirmPasswordError").textContent = "Passwords do not match.";
            return false;
        }

        return true;
    }
</script>
